
namespace Revive_Injector
{
    public class j0e_scripts
    {

        private string MissionFolder;

        script[] j0e_files;



        public j0e_scripts(string MissionFolder, int paramID)
        {
            this.MissionFolder = MissionFolder;

            this.j0e_files = new script[] {
            new script("fwatch\\fwkia.sqs",";*****************************************************************************\r\n;fwatch/fwkia.sqs  v1.0.7  11/02/2012  by j0e\r\n;\r\n;Desc.: Killed event handler for fwstat.\r\n;Call.: _un AddEventHandler [\"KILLED\",{[_THIS,_bol] Exec \"j0e_pack\\fwatch\\fwkia.sqs\"}]\r\n;Arg..: \"_un\" is a player or an unit;\r\n;       \"_bol\" is a boolean value, it is true if the unit is friendly.\r\n;Dep..: <logic>j0e_server, <var>j0e_fwstat, <array>j0e_players, <array>j0e_fwply,\r\n;       <array>j0e_aboutme, <script>net/send.sqs.\r\n;Notes: Array \"_THIS\" is equal to [_target,_killer]. This version scores\r\n;       both enemy and friendly kills.\r\n;*****************************************************************************\r\n;_i / _st / _un / _ta _kl / _bol\r\n\r\n?!j0e_fwstat:Exit\r\n_bol=(_THIS Select 1)\r\n_THIS=(_THIS Select 0)\r\n?(_THIS Select 0)==(_THIS Select 1):Exit\r\n_ta=-1\r\n_kl=-1\r\n_i=0\r\n#LoopPlayers\r\n_st=(j0e_players Select _i)\r\n?_st==\"<NULL>\":GoTo \"NextPlayer\"\r\n_un=(Call _st)\r\n?_un==(_THIS Select 0):_ta=_i\r\n?_un==(_THIS Select 1):_kl=_i\r\n#NextPlayer\r\n_i=_i+1\r\n?_i<(j0e_aboutme Select 0):GoTo \"LoopPlayers\"\r\n?_kl<0:Exit\r\nif (_ta<0) then {if (_bol) then {_i=4} else {_i=3}} else {_i=2}\r\n~(Random 2.1)\r\n_st=(Format [\"_x=(j0e_fwply Select (%1*5+%2))+1;j0e_fwply Set [%1*5+%2,_x]\",_kl,_i])\r\nif (Local j0e_server) then {Call _st} else {[[\"<DS>\"],_st] Exec \"j0e_pack\\net\\send.sqs\"}\r\nExit"),
            new script("miss\\cltrig.sqs",";*****************************************************************************\r\n;miss/cltrig.sqs  v3.0.1  07/08/2011  by j0e\r\n;\r\n;Desc.: A simple triggers monitor from the client point of view.\r\n;Call.: 0 Exec \"j0e_pack\\miss\\cltrig.sqs\"\r\n;Arg..: -\r\n;Dep..: <var>j0e_gameis.\r\n;Notes: Collect here all relevant trigger events for the mission progress.\r\n;*****************************************************************************\r\n;_ms\r\n@(TIME>0)\r\n@(j0e_gameis!=0)\r\n_ms=\"Mission failed.\\nYou are all dead.\";\r\nTitleText [_ms,\"PLAIN\"]\r\n~5\r\n_cam = j0e_camera select 0;\r\n _cam cameraeffect [\"terminate\", \"Back\"];\r\n camdestroy _cam;\r\n closeDialog 0;\r\nExit"),
            new script("net\\mon.sqs",";*****************************************************************************\r\n;net/mon.sqs  v1.0.3  22/07/2011  by j0e\r\n;\r\n;Desc.: Keeps the logic group low to avoid messagges loss.\r\n;Call.: 0 Exec \"j0e_pack\\net\\mon.sqs\"\r\n;Arg..: -\r\n;Dep..: <logic>j0e_server.\r\n;Notes: -\r\n;*****************************************************************************\r\n\r\n?!(Local j0e_server):Exit\r\n_gr=(Group j0e_server)\r\n#Loop\r\n@(Count (Units _gr))>1\r\n_un=((Units _gr) Select 1)\r\n~0.15\r\n~(Random 0.3)\r\nDeleteVehicle _un\r\nGoTo \"Loop\""),
            new script("net\\read.sqs",";*****************************************************************************\r\n;net/read.sqs  v3.0.3  12/06/2011  by j0e\r\n;\r\n;Desc.: Receives and executes a command from another host.\r\n;Call.: [_sr,[_to],_ms] Exec \"j0e_pack\\net\\read.sqs\"\r\n;Arg..: \"_sr\" is the sender, type string, taken from \"j0e_players\";\r\n;       \"_to\" is an array of players, taken from \"j0e_players\";\r\n;       if it is empty, all players, except the sender, will exec the command;\r\n;       if equal to [\"<ALLME>\"] the sender will exec too;\r\n;       if the string \"<DS>\" is in the array also the server will exec;\r\n;       \"_ms\" is a string containing a command to exec with \"Call _ms\".\r\n;Dep..: <logic>j0e_server, <array>j0e_aboutme.\r\n;Notes: -\r\n;*****************************************************************************\r\n\r\n_sr=(_THIS Select 0)\r\n_to=(_THIS Select 1)\r\n_ms=(_THIS Select 2)\r\n_me=FALSE\r\n?(Count _to)>0:GoTo \"NotZero\"\r\n?_sr==(j0e_aboutme Select 1):Exit\r\n_me=TRUE\r\n#NotZero\r\n?(Count _to)!=1:GoTo \"CheckMe\"\r\n?(_to Select 0)==\"<ALLME>\":_me=TRUE\r\n#CheckMe\r\n?(j0e_aboutme Select 1) In _to:_me=TRUE\r\n?(\"<DS>\" In _to)&&(Local j0e_server):_me=TRUE\r\n?_me:Call _ms\r\nExit"),
            new script("net\\send.sqs",";*****************************************************************************\r\n;net/send.sqs  v3.0.1  22/05/2011  by j0e\r\n;\r\n;Desc.: Sends a command through the network.\r\n;Call.: [[_to],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n;Arg..: \"_to\" is an array of players, taken from \"j0e_players\", to contact;\r\n;       if an empty array is specified, all players, except the sender, will\r\n;       be contacted; to call the sender too, set it to [\"<ALLME>\"];\r\n;       to call the server add the string \"<DS>\";\r\n;       \"_ms\" is a string containing a command to exec with \"Call _ms\".\r\n;Dep..: <array>j0e_aboutme, <logic>j0e_server, <script>net/read.sqs.\r\n;Notes: -\r\n;*****************************************************************************\r\n\r\n_to=(_THIS Select 0)\r\n_ms=(_THIS Select 1)\r\n_gr=(Group j0e_server)\r\n_in=(Format [\"[{%1},%2,{%3}] Exec {j0e_pack\\net\\read.sqs}\",(j0e_aboutme Select 1),_to,_ms])\r\n\"LOGIC\" CreateUnit [[0,0,0],_gr,_in]\r\nExit"),
            new script("revive\\bodies.sqs",";*****************************************************************************\r\n;revive/bodies.sqs  v3.0.8  04/02/2012  by j0e\r\n;\r\n;Desc.: Subroutine of the revive engine that manages the bodies.\r\n;Call.: [_myp,_cm,_pm1,_pm2] Exec \"j0e_pack\\revive\\bodies.sqs\"\r\n;Arg..: \"_myp\" is the sender index in the array \"j0e_players\";\r\n;       \"_cm\" is the command;\r\n;       \"_pm1\",\"_pm2\" are parameters.\r\n;Dep..: <array>j0e_aboutme, <array>j0e_players, <var>j0e_pong, <array>j0e_bodies,\r\n;       <script>net/send.sqs, <logic>j0e_server, <array>j0e_camxyz, <array>j0e_fwply.\r\n;Notes: Created to not load the big revivecoop. Added body remake command.\r\n;*****************************************************************************\r\n;_i _k / _st _ms / _xyz / _body _un\r\n\r\n_grpend = group j0e_grpend\r\n_k=(_THIS Select 0)\r\n_st=(_THIS Select 1)\r\n?_st==\"DU\":GoTo \"DelUnit\"\r\n?_st==\"B+\":GoTo \"BodyCreate\"\r\n?(_st==\"B-\")||(_st==\"BR\"):GoTo \"BodyDelete\"\r\n#Pong\r\nj0e_pong=TRUE\r\n?!(Local j0e_server):Exit\r\n?_st==\"K+\":_i=(j0e_fwply Select (_k*5+0))+1;j0e_fwply Set [_k*5+0,_i]\r\n?_st==\"R+\":_i=(j0e_fwply Select (_k*5+1))+1;j0e_fwply Set [_k*5+1,_i]\r\nExit\r\n\r\n#BodyCreate\r\n_xyz=(j0e_camxyz Select _k)\r\n_ms=(Format [\"%1\",_xyz])\r\n?(_ms==\"[-1,-1,-1]\")||(_ms==\"[-6,-6,-6]\"):GoTo \"Pong\"\r\n_i=(_THIS Select 2)\r\n_j0e_posASL=(j0e_posASL select _k)\r\n_body=(\"BODY\" CamCreate _xyz)\r\n_body setPosASL [_j0e_posASL select 0,_j0e_posASL select 1,(_j0e_posASL select 2)+0.25]\r\n_body SetDir (_i+90)\r\nj0e_bodies Set [_k,_body]\r\nGoTo \"Pong\"\r\n\r\n#BodyDelete\r\n_i=0\r\n_body=(j0e_bodies Select _k)\r\n?_body==_body:_i=(GetDir _body)-90;DeleteVehicle _body\r\nj0e_bodies Set [_k,OBJNULL]\r\n?_st==\"B-\":GoTo \"Pong\"\r\n~0.6\r\n_THIS=[_k,\"BR\",_i]\r\nGoTo \"BodyCreate\"\r\n\r\n#DelUnit\r\n_st=(j0e_players Select _k)\r\n_un=(Call _st)\r\n@(!IsNull (j0e_bodies select _k))||(!alive _un)\r\n_st=(j0e_players Select _k)\r\n_un=(Call _st)\r\n\r\n\r\n[_un] join _grpend;\"_un DisableAI _x\" forEach [\"ANIM\",\"AUTOTARGET\",\"MOVE\",\"TARGET\",\"WEAPONAIM\"];_un stop TRUE\r\n_ms = format [\"j0e_players Set [%1,\"\"<NULL>\"\"]; j0e_camxyz Set [%1,[-6,-6,-6]];deleteVehicle (j0e_bodies select %1)\",_k]\r\n[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n\r\n\r\nExit"),
            new script("revive\\camdlg.sqs",";*****************************************************************************\r\n;revive/camdlg.sqs  v3.0.10  05/02/2012  by j0e\r\n;\r\n;Desc.: Manages the revive camera and dialog.\r\n;Call.: 0 Exec \"j0e_pack\\revive\\camdlg.sqs\"\r\n;Arg..: -\r\n;Dep..: <array>j0e_players, <array>j0e_aboutme, <array>j0e_camera, <var>j0e_gameis,\r\n;       <array>j0e_camxyz, <dialog>j0eReviveDialog, <logic>j0e_server, <array>j0e_fwlogin.\r\n;Notes: Active punishments for the mission moderators. Autoupdate.\r\n;       New login procedure.\r\n;*****************************************************************************\r\n;_i _t _k / _st _ms / _un / _cam / _xyz / _lix / _upd / _dly / _gome\r\n\r\n_null=(Format [\"%1\",NIL])\r\n_onul=(Format [\"%1\",OBJNULL])\r\n_lix=[]\r\n_gome=FALSE\r\n\r\n_i=(j0e_aboutme Select 2)\r\n?(j0e_fwlogin Select _i) In [0,1]:GoTo \"CreateDlg\"\r\n\r\n_cam=(j0e_camera Select 0)\r\n?!(_cam In [OBJNULL]):j0e_camera Set [1,FALSE];Exit\r\n_i=(j0e_aboutme Select 2)\r\nj0e_camera Set [2,_i]\r\n_st=(j0e_players Select _i)\r\n_un=(Call _st)\r\n_xyz=+(j0e_camxyz Select _i)\r\n_ms=(Format [\"%1\",_xyz])\r\n?(_ms==\"[-1,-1,-1]\")||(_ms==\"[-6,-6,-6]\"):_xyz=(GetPos (Vehicle _un))\r\n_cam=(\"CAMERA\" CamCreate _xyz)\r\nj0e_camera Set [0,_cam]\r\n_vehPos=[]\r\n_vehPosOld=[]\r\nif (_ms==\"[-1,-1,-1]\") then {_cam CamSetTarget (Vehicle _un);_vehPos=getPosASL (Vehicle _un);_vehPosOld=getPosASL player} else {_cam CamSetTarget [_xyz select 0, _xyz select 1, _xyz select 2];_vehPos=_xyz;_vehPosOld=j0e_posASL select _i}\r\n\r\n_cam CameraEffect [\"EXTERNAL\",\"BACK\"]\r\n_cam CamCommand \"INERTIA ON\"\r\n_xyz=+(j0e_camera Select 4)\r\n_k=(_xyz Select 0)\r\n_t=(_xyz Select 1)\r\n_xyz Set [0,(_t*Cos(_k))]\r\n_xyz Set [1,(_t*Sin(_k))]\r\n_cam CamSetRelPos [_xyz select 0, _xyz select 1, _xyz select 2]\r\n_cam CamCommit 0\r\n\r\n_realNames=[]\r\n_wait=0\r\n#CreateDlg\r\n_dly=-1\r\n_i=(j0e_aboutme Select 2)\r\n_upd=(CreateDialog \"j0eReviveDialog\")\r\n?(j0e_fwlogin Select _i) In [0,1]:_upd=TRUE\r\n?!_upd:GoTo \"EndCreateDlg\"\r\nj0e_aboutme Set [4,\"?\"]\r\n_xyz=+(j0e_camera Select 4)\r\n_i=(_xyz Select 0)\r\n_t=(_xyz Select 1)\r\n_k=(_xyz Select 2)\r\n_smooth=(_xyz select 3)\r\nSliderSetRange [21004,90,450]\r\nSliderSetRange [21005,1,150]\r\nSliderSetRange [21006,0,150]\r\nSliderSetRange [21017,0,2]\r\nSliderSetSpeed [21004,10,30]\r\nSliderSetSpeed [21005,1,5]\r\nSliderSetSpeed [21006,1,5]\r\nSliderSetSpeed [21017,0.05,0.1]\r\nSliderSetPosition [21004,_i]\r\nSliderSetPosition [21005,_t]\r\nSliderSetPosition [21006,_k]\r\nSliderSetPosition [21017,_smooth]\r\nCtrlSetText [21014,(Format [\"A %1\",_i])]\r\nCtrlSetText [21015,(Format [\"D %1\",_t])]\r\nCtrlSetText [21016,(Format [\"H %1\",_k])]\r\nCtrlSetText [21018,(Format [\"S %1\",_smooth])]\r\n#MakeListAgain\r\n_i=0\r\nlbClear 21001\r\n_updateTime=_time + 5\r\n#LoopAddDlg\r\n_k=-1\r\n_st=(j0e_players Select _i)\r\n?_st==\"<NULL>\":GoTo \"NextAddDlg\"\r\n_xyz=+(j0e_camxyz Select _i)\r\n_ms=(Format [\"%1\",_xyz])\r\n?_ms==\"[-6,-6,-6]\":GoTo \"NextAddDlg\"\r\n_un=(Call _st)\r\n_ms=(Format [\"%1\",_un])\r\n?(_ms==_null)||(_ms==_onul):GoTo \"NextAddDlg\"\r\nif (!j0e_isPVP) then {CtrlSetText [21002, (Format [\"%1 alive\", (Count j0e_players)-(\"! isNull _x\" count j0e_bodies)-(\"_x\" count j0e_delun)])]} else {CtrlSetText [21002, (Format [\"%1 alive\", (\"_x != {<NULL>}\" Count j0e_players)-(\"! isNull _x\" count j0e_bodies)-(\"_x\" count j0e_delun)])]}\r\n_st = \"\"\r\n? ! alive _un || ! isNull (j0e_bodies select _i): _st = \" (Dead)\"\r\n? j0e_delun select _i : _st = \" (Bot)\"\r\n? _un != vehicle _un : _st = _st + format[\" (%1)\", typeOf Vehicle _un]; if (_un == driver vehicle _un) then {_st = _st + \" (Driver)\"} else {if (_un == gunner vehicle _un) then {_st = _st + \" (Gunner)\"} else {if (_un == commander vehicle _un) then {_st = _st + \" (Commander)\"} else {_st = _st + \" (Cargo)\"}}}\r\n\r\n_realNames set [_i,name _un]\r\n_st=format[\"%1%2\",Name _un, _st]\r\n_k=(LbAdd [21001,_st])\r\nLbSetValue [21001,_k,_i]\r\n? lbCurSel 21001 == -1: LbSetCurSel [21001,_k];\r\n?_i==(j0e_camera Select 2):CtrlSetText [21003,name _un]\r\n\r\n#NextAddDlg\r\n_lix Set [_i,_k]\r\n_i=_i+1\r\n?_i<(j0e_aboutme Select 0):GoTo \"LoopAddDlg\"\r\n#EndCreateDlg\r\n_upd=FALSE\r\nj0e_camera Set [1,FALSE]\r\n\r\n#LoopCamera\r\n?j0e_gameis!=0&&Dialog:CloseDialog 0\r\n?j0e_gameis!=0:Exit\r\n_cam=(j0e_camera Select 0)\r\n?_cam In [OBJNULL]:GoTo \"CloseCamDlg\"\r\n?(j0e_camera Select 3):_gome=TRUE\r\n?Dialog&&_gome:CloseDialog 0;GoTo \"SkipLblChanged\"\r\n?Dialog:GoTo \"SkipDlgCheck\"\r\n?(j0e_camera Select 5):GoTo \"CloseCamDlg\"\r\n?_dly<0:_dly=TIME;j0e_server GlobalChat \"§ Dialog will be restored in 9 seconds.\"\r\n?(TIME-_dly)>9:GoTo \"CreateDlg\"\r\n#SkipDlgCheck\r\n_i=(j0e_camera Select 2)\r\n? _time > _updateTime : goto \"MakeListAgain\"\r\n?_upd||!Dialog:GoTo \"SkipLblChanged\"\r\n_k=(LbCurSel 21001)\r\n_t=(LbValue [21001,_k])\r\n?_i!=_t:_i=_t;j0e_camera Set [2,_i];_upd=TRUE\r\n#SkipLblChanged\r\n?_gome:_i=(j0e_aboutme Select 2);_upd=TRUE\r\n_st=(j0e_players Select _i)\r\n?_st==\"<NULL>\":GoTo \"CamOnNextPly\"\r\n_un=(Call _st)\r\n_ms=(Format [\"%1\",_un])\r\n?(_ms==_null)||(_ms==_onul):GoTo \"CamOnNextPly\"\r\n_xyz=+(j0e_camxyz Select _i)\r\n_ms=(Format [\"%1\",_xyz])\r\n?_ms==\"[-6,-6,-6]\":GoTo \"CamOnNextPly\"\r\n?(j0e_aboutme Select 4) In [\"nx\",\"pr\"]:GoTo \"CamOnNextPly\"\r\nif (_ms==\"[-1,-1,-1]\") then {_vehPosOld=_vehPos;_cam CamSetTarget (Vehicle _un); _vehPos = getPosASL (vehicle _un)} else {_vehPosOld=_vehPos;_cam CamSetTarget [_xyz select 0, _xyz select 1, _xyz select 2]; _vehPos=j0e_posASL select _i}\r\n?!Dialog||!_upd:GoTo \"SkipDlgLabel\"\r\n_k=(_lix Select _i)\r\n?_k<0:GoTo \"SkipDlgLabel\"\r\nLbSetCurSel [21001,_k]\r\n_st=_realNames select _k\r\nCtrlSetText [21003,_st]\r\n#SkipDlgLabel\r\n_xyz=+(j0e_camera Select 4)\r\n?_gome||(j0e_aboutme Select 4)==\"rs\":_xyz=[270,10,5,0.35];j0e_aboutme Set [4,\"rs+\"]\r\n_i=(_xyz Select 0)\r\n_t=(_xyz Select 1)\r\n_k=(_xyz Select 2)\r\n_smooth=(_xyz Select 3)\r\n?Dialog&&(j0e_aboutme Select 4)==\"rs+\":SliderSetPosition [21004,_i];SliderSetPosition [21005,_t];SliderSetPosition [21006,_k]; SliderSetPosition [21017,_smooth]\r\n?(j0e_aboutme Select 4)==\"rs+\":GoTo \"SkipDlgSlids\"\r\n?!Dialog:GoTo \"SkipDlgSlids\"\r\n_i=(SliderPosition 21004)\r\n_t=(SliderPosition 21005)\r\n_k=(SliderPosition 21006)\r\n_smooth=(sliderPosition 21017)\r\n_i=_i-(_i Mod 1)\r\n_t=_t-(_t Mod 1)\r\n_k=_k-(_k Mod 1)\r\n_smooth=_smooth - (_smooth mod 0.01)\r\n#SkipDlgSlids\r\n_xyz Set [0,(_t*Cos(_i))]\r\n_xyz Set [1,(_t*Sin(_i))]\r\n_xyz Set [2,_k]\r\n? (_wait < _time) || (_upd): _cam CamSetRelPos [_xyz select 0, _xyz select 1, _xyz select 2]\r\nif (_upd) then {_cam CamSetRelPos [_xyz select 0, _xyz select 1, (_xyz select 2)+abs((_vehPos select 2)-(_vehPosOld select 2))];_cam CamCommit 2.1;_upd=FALSE; _wait = _time + 2.1} else {if (_wait < _time) then {_cam CamCommit _smooth}}\r\n~0.01\r\n?(j0e_aboutme Select 4) In [\"nx+\",\"pr-\",\"rs+\"]:j0e_aboutme Set [4,\"?\"]\r\n?_gome:GoTo \"WaitExit\"\r\n?!Dialog:GoTo \"LoopCamera\"\r\nj0e_camera Set [4,[_i,_t,_k,_smooth]]\r\nCtrlSetText [21014,(Format [\"A %1\",_i])]\r\nCtrlSetText [21015,(Format [\"D %1\",_t])]\r\nCtrlSetText [21016,(Format [\"H %1\",_k])]\r\nCtrlSetText [21018,(Format [\"S %1\",_smooth])]\r\nGoTo \"LoopCamera\"\r\n\r\n#CamOnNextPly\r\n_upd=TRUE\r\n_i=(j0e_camera Select 2)\r\n?(j0e_aboutme Select 4)==\"nx\":j0e_aboutme Set [4,\"nx+\"]\r\n?(j0e_aboutme Select 4)==\"pr\":j0e_aboutme Set [4,\"pr-\"]\r\nif ((j0e_aboutme Select 4)==\"pr-\") then {_i=_i-1} else {_i=_i+1}\r\n?_i<0:_i=(j0e_aboutme Select 0)-1\r\n?_i>=(j0e_aboutme Select 0):_i=0\r\nj0e_camera Set [2,_i]\r\n?!_gome:GoTo \"LoopCamera\"\r\n\r\n#WaitExit\r\nj0e_camera Set [1,FALSE]\r\n@(j0e_camera Select 5)\r\n\r\n#CloseCamDlg\r\nj0e_camera Set [3,FALSE]\r\nj0e_camera Set [5,FALSE]\r\n?Dialog:CloseDialog 0\r\n_cam=(j0e_camera Select 0)\r\n?_cam In [OBJNULL]:Exit\r\n_cam CameraEffect [\"TERMINATE\",\"BACK\"]\r\nCamDestroy _cam\r\n_cam=OBJNULL\r\nj0e_camera Set [0,OBJNULL]\r\nExit"),
            new script("revive\\climnu.sqs",";*****************************************************************************\r\n;revive/climnu.sqs  v1.0.4  05/02/2012  by j0e\r\n;\r\n;Desc.: Called from the dialog and fwatch/fwmain.sqs.\r\n;Call.: _cm Exec \"j0e_pack\\revive\\climnu.sqs\"\r\n;Arg..: \"_cm\" is a following string command:\r\n;       {nx}   focus on next player,\r\n;       {pr}   focus on prev player,\r\n;       {rs}   reset the camera position,\r\n;       {mod}  login requested.\r\n;Dep..: <logic>j0e_server, <array>j0e_aboutme, <array>j0e_fwlogin,\r\n;       <script>net/send.sqs, <script>revive/camdlg.sqs, <bool>j0e_pause.\r\n;Notes: New login procedure.\r\n;*****************************************************************************\r\n;_i _me\r\n\r\n?(j0e_aboutme Select 4)!=\"?\":Exit\r\nj0e_aboutme Set [4,_THIS]\r\nExit"),
            new scriptRevive("revive\\main.sqs", paramID, baza.DEBUG_ISPVP,";*****************************************************************************\r\n;revive/main.sqs  v3.0.21  05/02/2012  by j0e\r\n;\r\n;Desc.: The cooperative revive engine.\r\n;Call.: 0|1 Exec \"j0e_pack\\revive\\main.sqs\"\r\n;Arg..: 1=enable j0e_pause.\r\n;Dep..: <logic>j0e_server, <param>_reviveType, <array>j0e_players, <var>j0e_gameis,\r\n;       <var>j0e_pong, <array>j0e_bodies, <array>j0e_camxyz, <array>j0e_aboutme,\r\n;       <array>j0e_camera, <dialog>j0eReviveDialog, <mark>Respawn_<SIDE>,\r\n;       <marks><j0e_players>, <unit>j0e_grpend, <script>net/mon.sqs, <array>j0e_fwlogin,\r\n;       <script>net/send.sqs, <script>revive/bodies.sqs, <script>revive/camdlg.sqs,\r\n;       <script>revive/mod.sqs, <var>j0e_fwstat, <script>fwatch/fwkia.sqs, <bool>j0e_pause.\r\n;_reviveType: 0  \"none\"     revive is off,\r\n;        1  \"free\"     revive is unlimited,\r\n;        2  \"5 lifes\"  revive is allowed 5 times for each player,\r\n;        3  \"5 mins\"   revive must be done whithin 5 minutes,\r\n;        4  \"medic\"    revive can be done only by a medic player.\r\n;Notes: The side is not considered when reviving.\r\n;       Marker \"Respawn_<SIDE>\" must exist to work fine.\r\n;       Due to a bug, the join to \"GRPNULL\" won't be used anymore.\r\n;       Critical bug solved when a player forces to delete a local unit.\r\n;       Active punishments for the mission moderators.\r\n;       Revised body ASL (x2), equipment transfer, bodies management, rejoin.\r\n;       Lost player joins j0e_grpend. Medic count. New saveme pos. New login.\r\n;*****************************************************************************\r\n;_i _t _k / _st _ms / _un _body _dumy / _xyz / _wep _mag / _mediz\r\n;_grpend / j0e_delun / _revive / _revmin / _revpst / _mod / _revchk / _ehl\r\n\r\n;*****************************************************************************\r\n;Script has been modified. (Not by j0e)\r\n; - Unnecessary things were deleted (This includes admin panel)\r\n; - Bots get deleted only after they die. Their bodies won't dissapear either\r\n; - Camera dialog shows which units are dead or bots\r\n\r\nj0e_giveNade = {private[\"_i\",\"_give\",\"_last\"];_i=0;_last=\"\";_give=[];while{_i<count _this}do{if(_this select _i!=_last)then{if(\"_x==_this select _i\"count(magazines player)!=\"_x==_this select _i\"count _this)then{_give=_give+[_this select _i]};_last=_this select _i;};_i=_i+1;};_give}\r\nj0e_findLand = {private[\"_pos\",\"_thing\",\"_thing2\",\"_differ\",\"_itter\",\"_posi\",\"_a\",\"_z\",\"_x\",\"_y\"];_pos = _this;_thing = \"Barrel1\" camCreate [_pos select 0, _pos select 1, -500];_thing2 = \"PipeBomb\" camCreate [_pos select 0, _pos select 1, -500];_thing setPos [_pos select 0, _pos select 1, 0];_thing2 setPosASL [_pos select 0, _pos select 1, 0];_differ=1;_itter=1;_posi = getPos _thing;_a=0;_z = 0;while {_z < 5} do{if ( _a == 0 )then{ _x=_differ;_y=0;};if ( _a == 1 )then{ _x=_differ;_y=_differ;};if ( _a == 2 )then{ _x=0;_y=_differ;};if ( _a == 3 )then{ _x=-_differ;_y=-_differ;};if ( _a == 4 )then{ _x=0;_y=-_differ;};if ( _a == 5 )then{ _x=-_differ;_y=_differ;};if ( _a == 6 )then{ _x=_differ;_y=-_differ;};if ( _a == 7 )then{ _x=-_differ;_y=0;};_thing setPos [(_posi select 0)+_x*_itter,(_posi select 1)+_y*_itter,0];_thing2 setPosASL [(_posi select 0)+_x*_itter,(_posi select 1)+_y*_itter,0];_z = (getPosASL _thing select 2)-(getPosASL _thing2 select 2);_a = _a + 1;_itter=_itter+1;if ( _itter > 100 )then{ _differ = 5};if ( _itter > 500 )then{ _differ = 10};if ( _itter > 1000 )then{ _differ = 100};if ( _itter > 5000 )then{ _z = 10; _thing setPosASL [-5936,0,0];};if ( _a > 7 )then{ _a = 0};};_pos = getPosASL _thing;\"deleteVehicle _x\" forEach [_thing, _thing2];_pos}\r\n_reviveType = %%%PARAM%%%\r\nj0e_isPVP = %%%ISPVP%%%\r\nj0e_fwstat=FALSE\r\nj0e_gameis=0\r\nj0e_pong=FALSE\r\nj0e_bodies=[]\r\nj0e_posASL=[]\r\nj0e_camxyz=[]\r\nj0e_aboutme=[(Count j0e_players),\"<UNK>\",-6,FALSE,\"?\",\"\",FALSE,FALSE,-9,[0,0,0]]\r\nj0e_camera=[OBJNULL,FALSE,-1,FALSE,[270,10,5,0.35],FALSE]\r\nj0e_fwlogin=[]\r\nj0e_pause=FALSE\r\n_null=(Format [\"%1\",NIL])\r\n_onul=(Format [\"%1\",OBJNULL])\r\n_body=OBJNULL\r\n_dumy=OBJNULL\r\n_grpend=OBJNULL\r\nj0e_delun=[]\r\n_revive=1\r\n?_reviveType==2:_revive=5\r\n?_THIS==1:j0e_pause=TRUE\r\n_revmin=0\r\n_revpst=0\r\n_mod=-1\r\n_ehl=FALSE\r\n_mediz=[]\r\n\r\n?!(Local Player):j0e_aboutme Set [1,\"<DS>\"];j0e_aboutme Set [2,-1]\r\n_i=0\r\n#LoopPlayers\r\n_st=(j0e_players Select _i)\r\n_un=(Call _st)\r\n_ms=(Format [\"%1\",_un])\r\n?(_ms==_null)||(_ms==_onul)||(j0e_isPVP && side player != side _un):j0e_players Set [_i,\"<NULL>\"];GoTo \"SkipMe\"\r\n_ms=(TypeOf _un)\r\n?(_reviveType==4)&&(_ms In [\"SoldierWMedic\",\"SoldierEMedic\",\"SoldierGMedic\"]):_mediz Set [(Count _mediz),_i]\r\n?(j0e_aboutme Select 1)==\"<DS>\":GoTo \"SkipMe\"\r\n?_un==Player:j0e_aboutme Set [1,_st];j0e_aboutme Set [2,_i];j0e_camera Set [2,_i];j0e_aboutme Set [9,(GetPos Player)]\r\n#SkipMe\r\n?(GetMarkerType _st)!=\"\":_st SetMarkerSize [0,0]\r\nj0e_bodies Set [_i,OBJNULL]\r\nj0e_camxyz Set [_i,[-1,-1,-1]]\r\nj0e_fwlogin Set [_i,-1]\r\nj0e_delun Set [_i,FALSE]\r\n_i=_i+1\r\n?_i<(j0e_aboutme Select 0):GoTo \"LoopPlayers\"\r\n\r\n@(TIME>0.5)\r\nShowCinemaBorder FALSE\r\n?(j0e_aboutme Select 2)==-6:Exit\r\n\r\n_ms=(Format [\"%1\",j0e_grpend])\r\n?(_ms!=_null)&&(_ms!=_onul):_grpend=(Group j0e_grpend);RemoveAllWeapons j0e_grpend;\"j0e_grpend DisableAI _x\" forEach [\"ANIM\",\"AUTOTARGET\",\"MOVE\",\"TARGET\",\"WEAPONAIM\"]; j0e_grpend stop TRUE\r\n?_grpend In [OBJNULL]:j0e_server GlobalChat \"§ Unit 'j0e_grpend' not found.\"\r\n\r\n?(Local j0e_server):0 Exec \"j0e_pack\\net\\mon.sqs\"\r\n?(j0e_aboutme Select 1)==\"<DS>\":GoTo \"DeleAI\"\r\n\r\n_st=(Format [\"Respawn_%1\",(Side Player)])\r\n_ms=\"§ The marker '%1' is missing, not good.\"\r\n?(GetMarkerType _st)==\"\":j0e_server GlobalChat (Format [_ms,_st])\r\n_st=(j0e_aboutme Select 1)\r\n_ms=\"§ Your marker '%1' is missing: locate you on map will be difficult.\"\r\n?(GetMarkerType _st)==\"\":j0e_server GlobalChat (Format [_ms,_st])\r\n?(GetMarkerType _st)!=\"\":j0e_aboutme Set [9,(GetMarkerPos _st)]\r\n@!j0e_pause\r\n\r\n#DeleAI\r\n_i=0\r\n#LoopDeleAI\r\n?_i==(j0e_aboutme Select 2):GoTo \"NextDeleAI\"\r\n_st=(j0e_players Select _i)\r\n?_st==\"<NULL>\":GoTo \"NextDeleAI\"\r\n_un=(Call _st)\r\n_ms=(Format [\"%1\",_un])\r\n?(_ms!=_null)&&(_ms!=_onul):GoTo \"IsLocalAI\"\r\n;j0e_players Set [_i,\"<NULL>\"]\r\n;j0e_camxyz Set [_i,[-1,-1,-1]]\r\n_un=(j0e_bodies Select _i)\r\n?_un In [OBJNULL]:GoTo \"NextDeleAI\"\r\nDeleteVehicle _un\r\nj0e_bodies Set [_i,OBJNULL]\r\n~0.3\r\nGoTo \"NextDeleAI\"\r\n#IsLocalAI\r\n?(j0e_delun Select _i)||!(Local _un):GoTo \"NextDeleAI\"\r\n;?!(_grpend In [OBJNULL]):[_un] Join _grpend\r\n;?!(Local j0e_server)&&!(_grpend In [OBJNULL]):GoTo \"NextDeleAI\"\r\n_ms=(Format [{if (time > 10) then {j0e_server GlobalChat \"§ %2 exited. His bot will be deleted after death.\"}; j0e_delun Set [%1,TRUE]},_i,(Name _un)])\r\n?(GetMarkerType _st)!=\"\":_ms=_ms+(Format [\";{%1} SetMarkerSize [0,0]\",_st])\r\n[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n~0.3\r\n[_i,\"DU\"] Exec \"j0e_pack\\revive\\bodies.sqs\"\r\n#NextDeleAI\r\n_i=_i+1\r\n?_i<(j0e_aboutme Select 0):GoTo \"LoopDeleAI\"\r\n\r\n~0.6\r\n?j0e_gameis!=0:Exit\r\n?_reviveType!=4:GoTo \"SkipMediz\"\r\n_ms=\"\"\r\n_t=({(j0e_players Select _x)!=\"<NULL>\"} Count _mediz)\r\n_k=({Format[\"%1\",(j0e_camxyz Select _x)]!=\"[-1,-1,-1]\"} Count _mediz)\r\n?(_t-_k)!=(j0e_aboutme Select 8):j0e_aboutme Set [8,(_t-_k)];_ms=(Format [\"§ Medics available: %1.\",(j0e_aboutme Select 8)])\r\n?(_ms!=\"\")&&(j0e_aboutme Select 1)!=\"<DS>\":j0e_server GlobalChat _ms\r\n#SkipMediz\r\n?!(Local j0e_server):GoTo \"MeAlive\"\r\n_t=Count j0e_players\r\n_k=\"! isNull _x\" count j0e_bodies\r\n?_t<=_k+(\"_x\" count j0e_delun) && !j0e_isPVP:_ms=\"j0e_gameis=-6\";[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n~0.3\r\n?(j0e_aboutme Select 1)==\"<DS>\":GoTo \"DeleAI\"\r\n\r\n#MeAlive\r\n?_revive<0:GoTo \"DeleAI\"\r\n?(j0e_aboutme Select 3):GoTo \"NewUn\"\r\n_i=(j0e_aboutme Select 2)\r\n?!_ehl:_ehl=TRUE;Player AddEventHandler [\"KILLED\",{[_THIS,TRUE] Exec \"j0e_pack\\fwatch\\fwkia.sqs\"}]\r\n?_body In [OBJNULL]:_body=Player\r\n?Alive _body:GoTo \"DeleAI\"\r\nj0e_aboutme Set [3,TRUE]\r\nj0e_camera Set [5,FALSE]\r\n?_reviveType In [0,2]:_revive=_revive-1\r\n?(j0e_aboutme Select 6):_revive=0\r\n~1.2\r\n@(Abs(Speed _body)<=0.01)\r\n_j0e_posASL=[(getPosASL _body select 0),(getPosASL _body select 1),(getPosASL _body select 2)]\r\n\r\n_dumy=(\"EMPTYDETECTOR\" CamCreate [0,0])\r\n_dumy setPosASL _j0e_posASL\r\n_xyz = getPos _dumy\r\n? (_j0e_posASL select 2) < -0.1 : _j0e_posASL = (_xyz call j0e_findLand); _j0e_posASL set [2,(_j0e_posASL select 2)-0.5]; _dumy setPosASL _j0e_posASL; _xyz = getPos _dumy\r\ndeleteVehicle _dumy;\r\n_ms=(Format [\"if ((j0e_players select %3)!=\"\"<NULL>\"\" ) then {{%1} SetMarkerPos %2;{%1} SetMarkerSize [1,1]}\",(j0e_aboutme Select 1),_xyz, j0e_aboutme Select 2])\r\n?(_st!=\"\")&&(_revive>=1):[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n~0.3\r\nj0e_camera Set [1,TRUE]\r\n0 Exec \"j0e_pack\\revive\\camdlg.sqs\"\r\n@!(j0e_camera Select 1)\r\n_st=\".\"\r\n?(_reviveType==1):_st=\", waiting to be revived.\"\r\n?(_reviveType==2):_st=(Format [\" and has %1 lifes left.\",_revive]);CtrlSetText [21002,(Format [\"Lifes %1\",_revive])]\r\n?(_reviveType==3):_st=\" and must be revived within 5 minutes.\"\r\n?(_reviveType==4):_st=\", waiting to be revived by a medic.\"\r\n?(j0e_aboutme Select 6):_st=\" and cannot be revived.\"\r\n?(_j0e_posASL select 0)==-5936 : _st = \" and was absorbed by the sea.\"\r\n_k=(j0e_aboutme Select 2)\r\n_ms=(Format [{j0e_camxyz Set [%1,%2];j0e_posASL set [%1,%5];if ((j0e_players select %1)!=\"<NULL>\") then {j0e_server GlobalChat \"§ %3 is just dead%4\"};},_k,_xyz,(Name Player),_st,_j0e_posASL])\r\n?j0e_fwstat:_ms=_ms+(Format [\";[%1,{K+}] Exec {j0e_pack\\revive\\bodies.sqs}\",_k])\r\n[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n~0.3\r\n_revchk=FALSE\r\n\r\n#NewUn\r\n?_revchk:GoTo \"CheckRevive\"\r\n?!(Alive Player):GoTo \"DeleAI\"\r\nRemoveAllWeapons Player\r\n;Player DisableAI \"MOVE\"\r\nPlayer SwitchMove \"LYING\"\r\n?_mod>-1:_body RemoveAction _mod;_mod=-1\r\n_k=(j0e_aboutme Select 2)\r\n?(_revive<1)||(j0e_aboutme Select 6)||((_j0e_posASL select 0)==-5936):GoTo \"ReviveOff\"\r\n_i=(GetDir _body)\r\nPlayer SetDir _i\r\n_body SetPos (GetPos Player)\r\nj0e_pong=FALSE\r\n_ms=(Format [\"[%1,{B+},%2] Exec {j0e_pack\\revive\\bodies.sqs}\",_k,_i])\r\n[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n@j0e_pong\r\n_revpst=0\r\n?_reviveType==3:_revive=300;_revmin=TIME;CtrlSetText [21002,(Format [\"Time %1\",_revive])]\r\n_revchk=TRUE\r\nGoTo \"DeleAI\"\r\n\r\n#CheckRevive\r\n~0.6\r\n?(j0e_aboutme Select 7):GoTo \"ReviveMe\"\r\n_k=-1\r\n_t=(j0e_aboutme Select 2)\r\n_i=(j0e_aboutme Select 0)\r\n_dumy=(j0e_bodies Select _t)\r\n?_dumy In [OBJNULL]:GoTo \"NextRevive\"\r\n_i=0\r\n#LoopRevive\r\n?_i==(j0e_aboutme Select 2):GoTo \"NextRevive\"\r\n_st=(j0e_players Select _i)\r\n?_st==\"<NULL>\":GoTo \"NextRevive\"\r\n_un=(Call _st)\r\n_ms=(Format [\"%1\",_un])\r\n?(_ms==_null)||(_ms==_onul):GoTo \"NextRevive\"\r\n?!(Alive _un):GoTo \"NextRevive\"\r\n_ms=(TypeOf _un)\r\n?(_reviveType==4)&&!(_ms In [\"SoldierWMedic\",\"SoldierEMedic\",\"SoldierGMedic\"]):GoTo \"NextRevive\"\r\n?(_un Distance _dumy)<2.5:_revpst=_revpst+1;_k=_i\r\n?_revpst>6:GoTo \"ReviveMe\"\r\n#NextRevive\r\n_i=_i+1\r\n?_i<(j0e_aboutme Select 0):GoTo \"LoopRevive\"\r\n?(_k!=-1)||(_reviveType!=3):GoTo \"DeleAI\"\r\n_t=(TIME-_revmin)\r\n_k=_t-(_t Mod 10)\r\n_t=300-_k\r\n?_t==_revive:GoTo \"DeleAI\"\r\n_i=(_t Mod 60)\r\n_ms=\"\"\r\n_g=(j0e_aboutme Select 2)\r\n?(_t>30)&&(_i==0):_ms=(Format [{if ((j0e_players select %3)!=\"<NULL>\") then {j0e_server GlobalChat \"§ %1 has %2 mins to be revived.\"}},(Name Player),(_t/60),_g])\r\n?(_t>=10)&&(_t<=30):_ms=(Format [{if ((j0e_players select %3)!=\"<NULL>\") then {j0e_server GlobalChat \"§ %1 has %2 secs to be revived.\"}},(Name Player),_t,_g])\r\n?(_t<10):_t=0;_ms=(Format [{if ((j0e_players select %2)!=\"<NULL>\") then {j0e_server GlobalChat \"§ %1 was lost.\"}},(Name Player),_g])\r\n?(_ms!=\"\"):[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n_revive=_t\r\nCtrlSetText [21002,(Format [\"Time %1\",_revive])]\r\n?_revive>=1:GoTo \"DeleAI\"\r\nGoTo \"DoneMag\"\r\n\r\n#ReviveMe\r\nif (j0e_aboutme Select 7) then {_st=\"The *moderator*\";_revmin=-1;j0e_aboutme Set [7,FALSE]} else {_st=(Name _un);_revmin=_i}\r\nj0e_camera Set [1,TRUE]\r\nj0e_camera Set [3,TRUE]\r\n@!(j0e_camera Select 1)\r\n_wep=(Weapons _body)\r\n_i=0\r\n_t=(Count _wep)-1\r\n#LoopWep\r\n?_i>_t:GoTo \"DoneWep\"\r\nPlayer Action [\"TAKE WEAPON\",_body,0,0,(_wep Select _i)]\r\n_i=_i+1\r\nGoTo \"LoopWep\"\r\n#DoneWep\r\n_mag=(Magazines _body)\r\n_i=0\r\n_t=(Count _mag)-1\r\n#LoopMag\r\n?_i>_t:GoTo \"DoneMag\"\r\nPlayer Action [\"TAKE MAGAZINE\",_body,0,0,(_mag Select _i)]\r\n_i=_i+1\r\nGoTo \"LoopMag\"\r\n#DoneMag\r\n~1.2\r\n_k=(j0e_aboutme Select 2)\r\nj0e_pong=FALSE\r\n_ms=(Format [\"[%1,{B-}] Exec {j0e_pack\\revive\\bodies.sqs}\",_k])\r\n[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n@j0e_pong\r\n?_revive<1:GoTo \"RemoveDumy\"\r\nPlayer SetPos (j0e_camxyz Select _k)\r\n~2.1\r\n\r\n\r\n\"Player addMagazine _x\" forEach (_mag call j0e_giveNade)\r\nj0e_camera Set [5,TRUE]\r\n#RemoveDumy\r\nDeleteVehicle _body\r\n_body=OBJNULL\r\n_ms=(Format [\"{%1} SetMarkerSize [0,0]\",(j0e_aboutme Select 1)])\r\n?(GetMarkerType (j0e_aboutme Select 1))!=\"\":[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n~0.3\r\n?_revive<1:GoTo \"ReviveOff\"\r\n_ms=(Format [{j0e_camxyz Set [%1,[-1,-1,-1]];if ((j0e_players select %1)!=\"<NULL>\") then {j0e_server GlobalChat \"§ %2 revived %3.\"}},_k,_st,(Name Player)]);\r\nplayer setCaptive FALSE\r\n?j0e_fwstat&&(_revmin>=0):_ms=_ms+(Format [\";[%1,{R+}] Exec {j0e_pack\\revive\\bodies.sqs}\",_revmin])\r\n[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n~0.3\r\n_ehl=FALSE\r\nj0e_aboutme Set [3,FALSE]\r\nGoTo \"DeleAI\"\r\n\r\n#ReviveOff\r\n[Player] Join _grpend\r\n_revive=-9\r\n_ms=(Format [\"j0e_camxyz Set [%1,[-6,-6,-6]];j0e_bodies Set [%1,player]\",_k])\r\n[[\"<ALLME>\"],_ms] Exec \"j0e_pack\\net\\send.sqs\"\r\n~0.3\r\nGoTo \"DeleAI\""),
        };
        }

        public void createScripts()
        {
            foreach (script script in j0e_files)
            {
                script.generateFile(MissionFolder);
            }
        }

    }
}
